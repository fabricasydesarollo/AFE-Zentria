# ===================================
# Configuración Core
# ===================================
ENVIRONMENT=development
DATABASE_URL=mysql+pymysql://user:password@localhost:3306/bd_afe
SECRET_KEY=supersecret-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
BACKEND_CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# ===================================
# Microsoft Graph API (Principal)
# ===================================
# Servicio principal para envío de emails desde buzón compartido
# Requiere configuración en Azure AD

GRAPH_TENANT_ID=your-tenant-id
GRAPH_CLIENT_ID=your-client-id
GRAPH_CLIENT_SECRET=your-client-secret
GRAPH_FROM_EMAIL=noreply@empresa.com
GRAPH_FROM_NAME=Sistema AFE - Notificaciones

# Permisos requeridos en Azure AD:
# - Mail.Send (Application permission)
# - User.Read.All (Application permission - opcional)
# Configurar en: Azure Portal > Azure AD > App registrations > API permissions

# ===================================
# SMTP Email Configuration (Fallback)
# ===================================
# El sistema intenta Microsoft Graph primero. Si falla, usa SMTP automáticamente.
# SMTP es opcional pero recomendado como backup.

# Servidor SMTP (ejemplos: smtp.gmail.com, smtp.office365.com)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587

# Credenciales de autenticación
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email del remitente
SMTP_FROM_EMAIL=noreply@empresa.com
SMTP_FROM_NAME=Sistema de Facturas

# Opciones de seguridad
SMTP_USE_TLS=True
SMTP_USE_SSL=False
SMTP_TIMEOUT=30

# ===================================
# Ejemplos de configuración SMTP:
# ===================================

# Gmail (requiere App Password):
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USE_TLS=True
# SMTP_USER=tu-email@gmail.com
# SMTP_PASSWORD=xxxx-xxxx-xxxx-xxxx
# Generar App Password: https://myaccount.google.com/apppasswords

# Outlook/Office365:
# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USE_TLS=True
# SMTP_USER=tu-email@outlook.com
# SMTP_PASSWORD=tu-contraseña

# SendGrid:
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USE_TLS=True
# SMTP_USER=apikey
# SMTP_PASSWORD=tu-sendgrid-api-key

# ===================================
# Frontend URLs
# ===================================
# URL del frontend para generar links en emails y redirecciones
# Ejemplos:
# - Desarrollo: http://localhost:5173
# - Producción: https://app.empresa.com
# - Staging: https://staging.empresa.com

FRONTEND_URL=http://localhost:5173

# URL base de la API (para links a PDFs/XMLs en emails)
# Ejemplos:
# - Desarrollo: http://localhost:8000
# - Producción: https://api.empresa.com
# - Staging: https://api-staging.empresa.com
API_BASE_URL=http://localhost:8000

# ===================================
# Auto-Creación de Proveedores
# ===================================
# Control de creación automática de proveedores desde facturas
# Cuando llega una factura con NIT que no existe en la BD:
# - Si PROVIDER_AUTO_CREATE_ENABLED=true -> Crear automáticamente
# - Si PROVIDER_AUTO_CREATE_ENABLED=false -> Dejar para revisión manual
#
# RECOMENDACIÓN PRODUCCIÓN:
# - PROVIDER_AUTO_CREATE_ENABLED=true (evita fricción)
# - PROVIDER_AUTO_CREATE_LOG_AUDIT=true (auditoría completa)
# - PROVIDER_AUTO_CREATE_NOTIFY_ADMIN=true (alertas a admin)

PROVIDER_AUTO_CREATE_ENABLED=true
PROVIDER_AUTO_CREATE_LOG_AUDIT=true
PROVIDER_AUTO_CREATE_NOTIFY_ADMIN=false
PROVIDER_AUTO_CREATE_ADMIN_EMAIL=admin@empresa.com
